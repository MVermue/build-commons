<?xml version="1.0" encoding="UTF-8" ?>
<project name="ABC:PHP:Analysis:Linter:phpl:Extension"
         xmlns:abc="http://abc.tools.qafoo.com/abc.xsd"
         xmlns:internal="http://abc.tools.qafoo.com/abc-internal.xsd">

    <target name="-ABC:PHP:Analysis:Linter:phpl:Extension"
            depends="-ABC:SDK:Core:Extension"
            extensionOf="-compile:before~hook">
        <abc:extension-init name="ABC:PHP:Analysis:Linter:phpl:Extension" />

        <abc:changed-fileset id="-ABC.PHP.Analysis.Linter.phpl.fileset"
                             dir="${abc.source.php.directory}">
            <include name="**/*.php" />
        </abc:changed-fileset>

        <abc:apply apply-taskname="phpl"
               executable="${abc.environment.executable.php}"
               failonerror="true"
               parallel="false"
               visible-stdout="false"
               visible-stderr="false"
               verbose="true">
            <arg value="-l" />
            <fileset refid="-ABC.PHP.Analysis.Linter.phpl.fileset" />
        </abc:apply>

        <abc:commit-changes id="-ABC.PHP.Analysis.Linter.phpl.fileset" />
    </target>

    <!-- Public execution alias -->
    <target name="php:analysis:linter:phpl"
            depends="-ABC:PHP:Analysis:Linter:phpl:Extension" />
</project>
